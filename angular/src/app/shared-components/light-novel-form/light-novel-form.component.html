<div class="container">
  <div class="row justify-content-center">
    <div class="col col-md-10 col-lg-8">
      <section class="form-signin m-auto mt-5">
        <form [formGroup]="createLightNovelForm">
          <h1 class="h3 text-center mb-3 fw-normal">
            {{
              novel ? "Modifica la tua Light Novel" : "Crea la tua Light Novel"
            }}
          </h1>

          <label for="title" class="mt-3">
            {{ novel ? "Modifica il titolo" : "Inserisci il titolo" }}
          </label>
          <input
            type="text"
            formControlName="title"
            class="form-control"
            placeholder="Write your title... "
            name="title"
            id="title"
          />
          <p *ngIf="isTouchedInvalid('title')">
            Inserisci correttamente il titolo
          </p>

          <label for="plot" class="mt-3">
            {{ novel ? "Modifica la trama" : "Inserisci una breve trama" }}
          </label>
          <textarea
            name="plot"
            formControlName="plot"
            class="form-control"
            id="plot"
          ></textarea>
          <p *ngIf="isTouchedInvalid('plot')">
            Inserisci correttamente la trama
          </p>
          <label for="description" class="mt-3">
            {{
              novel
                ? "Modifica la descrizione"
                : "Inserisci una breve descrizione"
            }}
          </label>
          <textarea
            name="description"
            formControlName="description"
            class="form-control"
            id="description"
          ></textarea>
          <p *ngIf="isTouchedInvalid('description')">
            Inserisci correttamente la descrizione
          </p>

          <label for="author" class="mt-3">
            {{ novel ? "Modifica l'autore" : "Inserisci l'autore" }}
          </label>
          <input
            type="text"
            formControlName="author"
            class="form-control"
            placeholder="Write your author..."
            name="author"
            id="author"
          />
          <p *ngIf="isTouchedInvalid('author')">
            Inserisci correttamente il nome dell'autore
          </p>

          <p class="mt-2 mb-0">
            {{ novel ? "Cambia il genere:" : "Scegli il genere:" }}
          </p>
          <div formArrayName="genre" class="mt-3">
            <div class="row">
              <div *ngFor="let genre of genreArr; let i = index" class="col">
                <input
                  type="checkbox"
                  class="btn-check"
                  [formControlName]="i"
                  id="{{ genre }}"
                />
                <label
                  class="btn btn-outline-warning genre-btn"
                  for="{{ genre }}"
                  >{{ genre }}</label
                >
              </div>
            </div>
          </div>
          <label for="file" class="mt-3 d-flex justify-content-center">
            {{
              novel
                ? "Modifica la copertina della tua Light Novel"
                : "Inserisci la copertina della tua Light Novel"
            }}
          </label>
          <label for="file" class="mt-3" id="file-btn">Carica File</label>
          <input
            type="file"
            formControlName="image_url"
            class="form-control"
            id="file"
          />
          <h4
            class="text-center mt-3 text-uppercase d-flex justify-content-center"
          >
            {{ novel ? "Modifica la tua storia" : "Crea la tua storia" }}
          </h4>
          <div formGroupName="story">
            <h5 class="text-uppercase d-flex justify-content-center">
              INIZIO DELLA STORIA
            </h5>

            <!-- First Section -->
            <div class="border border-3 border-secondary rounded-4 p-3 mb-3">
              <label for="part1">
                {{
                  novel
                    ? "Modifica la prima parte della sezione interattiva"
                    : "Inserisci la prima parte della sezione interattiva"
                }}
              </label>
              <input
                type="text"
                formControlName="part1"
                class="form-control"
                placeholder="Write the section interactive..."
                id="part1"
              />
              <p *ngIf="isTouchedInvalid('story.part1')">
                Inserisci correttamente la parte interattiva
              </p>

              <div
                formGroupName="firstChoice"
                class="d-flex justify-content-evenly"
              >
                <div>
                  <label for="firstChoice1">{{
                    novel
                      ? "Modifica la scelta n°1 interattiva"
                      : "Inserisci la scelta n°1 interattiva"
                  }}</label>
                  <input
                    type="text"
                    formControlName="choice1"
                    class="form-control"
                    placeholder="Write the choice interactive..."
                    id="firstChoice1"
                  />
                  <p *ngIf="isTouchedInvalid('story.firstChoice.choice1')">
                    Inserisci correttamente la parte interattiva
                  </p>
                </div>
                <div>
                  <label for="firstChoice2">{{
                    novel
                      ? "Modifica la scelta n°2 interattiva"
                      : "Inserisci la scelta n°2 interattiva"
                  }}</label>
                  <input
                    type="text"
                    formControlName="choice2"
                    class="form-control"
                    placeholder="Write the choice interactive..."
                    id="firstChoice2"
                  />
                  <p *ngIf="isTouchedInvalid('story.firstChoice.choice2')">
                    Inserisci correttamente la parte interattiva
                  </p>
                </div>
              </div>
            </div>

            <!-- Second Section -->
            <h5 class="text-uppercase d-flex justify-content-center">
              CONTINUO DELLA STORIA
            </h5>
            <div class="border border-3 border-secondary rounded-4 p-3 mb-3">
              <div formGroupName="part2" class="d-flex justify-content-evenly">
                <div>
                  <label for="part2A">
                    {{
                      novel
                        ? "Modifica la seconda parte interattiva (che è influenzata dalla scelta n°1)"
                        : "Inserisci la seconda parte interattiva (che è influenzata dalla scelta n°1)"
                    }}
                  </label>
                  <input
                    type="text"
                    formControlName="part2A"
                    class="form-control"
                    placeholder="Write the section interactive..."
                    id="part2A"
                  />
                  <p *ngIf="isTouchedInvalid('story.part2.part2A')">
                    Inserisci correttamente la parte interattiva
                  </p>
                </div>
                <div>
                  <label for="part2B">
                    {{
                      novel
                        ? "Modifica la seconda parte interattiva (che è influenzata dalla scelta n°2)"
                        : "Inserisci la seconda parte interattiva (che è influenzata dalla scelta n°2)"
                    }}
                  </label>
                  <input
                    type="text"
                    formControlName="part2B"
                    class="form-control"
                    placeholder="Write the section interactive..."
                    id="part2B"
                  />
                  <p *ngIf="isTouchedInvalid('story.part2.part2B')">
                    Inserisci correttamente la parte interattiva
                  </p>
                </div>
              </div>

              <div formGroupName="secondChoice">
                <div class="d-flex justify-content-evenly">
                  <div>
                    <label for="choice1">
                      {{
                        novel
                          ? "Modifica la seconda sezione (C2A) interattiva"
                          : "Inserisci la seconda sezione (C2A) interattiva"
                      }}</label
                    >
                    <input
                      type="text"
                      formControlName="choice1"
                      class="form-control"
                      placeholder="Write the choice interactive..."
                      id="choice1"
                    />
                    <p *ngIf="isTouchedInvalid('story.secondChoice.choice1')">
                      Inserisci correttamente la parte interattiva
                    </p>
                  </div>
                  <div>
                    <label for="choice2">
                      {{
                        novel
                          ? "Modifica la seconda sezione (C2B) interattiva"
                          : "Inserisci la seconda sezione (C2B) interattiva"
                      }}
                    </label>
                    <input
                      type="text"
                      formControlName="choice2"
                      class="form-control"
                      placeholder="Write the choice interactive..."
                      id="choice2"
                    />
                    <p *ngIf="isTouchedInvalid('story.secondChoice.choice2')">
                      Inserisci correttamente la parte interattiva
                    </p>
                  </div>
                </div>
                <div class="d-flex justify-content-evenly">
                  <div>
                    <label for="choice3">
                      {{
                        novel
                          ? "Modifica la seconda sezione (C2C) interattiva"
                          : "Inserisci la seconda sezione (C2C) interattiva"
                      }}
                    </label>
                    <input
                      type="text"
                      formControlName="choice3"
                      class="form-control"
                      placeholder="Write the choice interactive..."
                      id="choice3"
                    />
                    <p *ngIf="isTouchedInvalid('story.secondChoice.choice3')">
                      Inserisci correttamente la parte interattiva
                    </p>
                  </div>
                  <div>
                    <label for="choice4">
                      {{
                        novel
                          ? "Modifica la seconda sezione (C2D) interattiva"
                          : "Inserisci la seconda sezione (C2D) interattiva"
                      }}
                    </label>
                    <input
                      type="text"
                      formControlName="choice4"
                      class="form-control"
                      placeholder="Write the choice interactive..."
                      id="choice4"
                    />
                    <p *ngIf="isTouchedInvalid('story.secondChoice.choice4')">
                      Inserisci correttamente la parte interattiva
                    </p>
                  </div>
                </div>
              </div>
            </div>

            <!-- Third Section -->
            <h5 class="text-uppercase d-flex justify-content-center">FINALE</h5>
            <div class="border border-3 border-secondary rounded-4 p-3 mb-3">
              <div formGroupName="part3">
                <div class="d-flex justify-content-evenly">
                  <div>
                    <label for="part3A">
                      {{
                        novel
                          ? "Modifica la terza sezione (3A) interattiva"
                          : "Inserisci la terza sezione (3A) interattiva"
                      }}
                    </label>
                    <input
                      type="text"
                      formControlName="part3A"
                      class="form-control"
                      placeholder="Write the section interactive..."
                      id="part3A"
                    />
                    <p *ngIf="isTouchedInvalid('story.part3.part3A')">
                      Inserisci correttamente la parte interattiva
                    </p>
                  </div>
                  <div>
                    <label for="part3B">
                      {{
                        novel
                          ? "Modifica la terza sezione (3B) interattiva"
                          : "Inserisci la terza sezione (3B) interattiva"
                      }}
                    </label>
                    <input
                      type="text"
                      formControlName="part3B"
                      class="form-control"
                      placeholder="Write the section interactive..."
                      id="part3B"
                    />
                    <p *ngIf="isTouchedInvalid('story.part3.part3B')">
                      Inserisci correttamente la parte interattiva
                    </p>
                  </div>
                </div>
                <div class="d-flex justify-content-evenly">
                  <div>
                    <label for="part3C">
                      {{
                        novel
                          ? "Modifica la terza sezione (3C) interattiva"
                          : "Inserisci la terza sezione (3C) interattiva"
                      }}
                    </label>
                    <input
                      type="text"
                      formControlName="part3C"
                      class="form-control"
                      placeholder="Write the section interactive..."
                      id="part3C"
                    />
                    <p *ngIf="isTouchedInvalid('story.part3.part3C')">
                      Inserisci correttamente la parte interattiva
                    </p>
                  </div>
                  <div>
                    <label for="part3D">
                      {{
                        novel
                          ? "Modifica la terza sezione (3D) interattiva"
                          : "Inserisci la terza sezione (3D) interattiva"
                      }}
                    </label>
                    <input
                      type="text"
                      formControlName="part3D"
                      class="form-control"
                      placeholder="Write the section interactive..."
                      id="part3D"
                    />
                    <p *ngIf="isTouchedInvalid('story.part3.part3D')">
                      Inserisci correttamente la parte interattiva
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="d-flex justify-content-center my-2">
            <button
              *ngIf="!novel"
              (click)="addLightNovel()"
              class="btn btn-outline-warning mx-2"
            >
              Crea
            </button>
            <button
              *ngIf="novel"
              (click)="updateLightNovel()"
              class="btn btn-outline-warning mx-2"
            >
              Modifica
            </button>
            <button (click)="cleanForum()" class="btn btn-outline-warning mx-2">
              Svuota
            </button>
          </div>
        </form>
      </section>
    </div>
  </div>
</div>
